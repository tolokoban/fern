"use strict";(self.webpackChunkfern=self.webpackChunkfern||[]).push([[826],{925:(t,n,e)=>{e.d(n,{Z:()=>i});var r=e(81),o=e.n(r),s=e(645),a=e.n(s)()(o());a.push([t.id,".IgF_c5MakGdPseyqvW2h {\n    overflow: hidden;\n    background-color: #000;\n}\n\n.IgF_c5MakGdPseyqvW2h,\n.IgF_c5MakGdPseyqvW2h > canvas {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n.IgF_c5MakGdPseyqvW2h > menu {\n    position: absolute;\n    right: 0;\n    top: 0;\n    padding: 1em;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    gap: 1em;\n    margin: 0;\n}\n\n.IgF_c5MakGdPseyqvW2h > menu > button {\n    position: relative;\n    margin: 0;\n}\n",""]),a.locals={PageView:"IgF_c5MakGdPseyqvW2h"};const i=a},522:(t,n,e)=>{e.d(n,{Z:()=>g});var r=e(379),o=e.n(r),s=e(795),a=e.n(s),i=e(569),c=e.n(i),h=e(565),u=e.n(h),l=e(216),f=e.n(l),d=e(589),p=e.n(d),y=e(925),b={};b.styleTagTransform=p(),b.setAttributes=u(),b.insert=c().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=f(),o()(y.Z,b);const g=y.Z&&y.Z.locals?y.Z.locals:void 0},826:(t,n,e)=>{e.a(t,(async(t,r)=>{try{e.r(n),e.d(n,{default:()=>f});var o=e(893),s=e(294),a=e(28),i=e(522),c=e(215),h=e(686),u=e(273),l=t([a]);function f(){const t=(0,c.vk)(),n=s.useRef(null);return s.useEffect((()=>(a.B.canvas=n.current,a.B.params=t,()=>{a.B.canvas=null})),[t]),(0,o.jsxs)("div",{className:i.Z.PageView,children:[(0,o.jsx)("canvas",{ref:n}),(0,o.jsxs)("menu",{children:[(0,o.jsx)(h.NI,{icon:h.yl,onClick:(0,u.H)("/barnsley/edit")}),(0,o.jsx)(h.NI,{icon:h.SW,onClick:a.B.reset})]})]})}a=(l.then?(await l)():l)[0],r()}catch(d){r(d)}}))},215:(t,n,e)=>{function r(t,n,e="data"){if("unknown"===n)return;if("null"===n){if(null!==t)throw Error(`Expected ${e} to be null and not a ${typeof t}!`);return}if("string"==typeof n){if(typeof t!==n)throw Error(`Expected ${e} to be a string and not a ${typeof t}!`);return}if(Array.isArray(n)){const[o]=n;switch(o){case"array":return void function(t,n,e){if(!Array.isArray(t))throw Error(`Expected ${n} to be an array and not a ${typeof t}!`);const[,o]=e;for(let e=0;e<t.length;e+=1)r(t[e],o,`${n}[${e}]`)}(t,e,n);case"map":return void function(t,n,e){if(!function(t){return!!t&&!Array.isArray(t)&&"object"==typeof t}(t))throw Error(`Expected ${n} to be an object and not a ${typeof t}!`);const[,o]=e;for(const e of Object.keys(t))"string"==typeof e&&r(t[e],o,`${n}[${e}]`)}(t,e,n);case"?":return void function(t,n,e){if(void 0===t)return;const[,o]=e;r(t,o,n)}(t,e,n);case"|":return void function(t,n,e){const[,...o]=e;let s=Error(`No type has been defined for this alternative: ${JSON.stringify(e)}!`);for(const e of o)try{return void r(t,e,n)}catch(t){t instanceof Error&&(s=t)}throw s}(t,e,n);case"literal":return void function(t,n,e){const[,...r]=e;for(const n of r)if(t===n)return;throw Error(`Expected ${n} to be a literal (${r.map((t=>`"${t}"`)).join(" | ")})!`)}(t,e,n);default:if(o.startsWith("array("))return void function(t,n,e,o){if(!Array.isArray(t))throw Error(`Expected ${n} to be an array and not a ${typeof t}!`);if(t.length!==o)throw Error(`${n} was expected to have a length of ${o}, but we got ${t.length}!`);const[,s]=e;for(let e=0;e<t.length;e+=1)r(t[e],s,`${n}[${e}]`)}(t,e,n,parseInt(o.substring(6,o.length-1),10));throw Error(`Don't know how to create a type guard for this kind of type: ${JSON.stringify(n)}`)}}if("object"!=typeof t)throw Error(`Expected ${e} to be an object and not a ${typeof t}!`);const o=t;for(const t of Object.keys(n))"string"==typeof t&&n[t]&&r(o[t],n[t],`${e}.${t}`)}e.d(n,{lB:()=>c,go:()=>i,vk:()=>u});var o=e(294),s=e(78);const a={barnsley:{functions:[[0,0,0,.16,0,0,1],[.85,.04,-.04,.85,0,1.6,85],[.2,-.26,.23,.22,0,1.6,7],[-.15,.28,.26,.24,0,.44,7]],bounds:[-2.182,-1e-4,6.642,9.9983]},cyclosorus:{functions:[[0,0,0,.25,0,-.4,2],[.95,.005,-.005,.93,-.002,.5,84],[.035,-.2,.16,.04,-.09,.02,7],[-.04,.2,.16,.04,.083,.12,7]],bounds:[0,0,2,7]},modified:{functions:[[0,0,0,.2,0,-.12,1],[.845,.035,-.035,.82,0,1.6,85],[.2,-.31,.255,.245,0,.29,7],[-.15,.24,.25,.2,0,.68,7]],bounds:[-2.182,-1e-4,6.5,9]},culcita:{functions:[[0,0,0,.25,0,-.14,2],[.85,.02,-.02,.83,0,1,84],[.09,-.28,.3,.11,0,.6,7],[-.09,.28,.3,.09,0,.7,7]],bounds:[-4,0,2,6]},fishbone:{functions:[[0,0,0,.25,0,-.4,2],[.95,.002,-.002,.93,-.002,.5,84],[.035,-.11,.27,.01,-.05,.005,7],[-.04,.11,.27,.01,.047,.06,7]],bounds:[-5,-1,2,8]},coch:{functions:[[.5,.375,.5,-.375,-.0625,.5625,10],[.5,-.375,-.5,-.375,.5625,1.0625,10],[1,0,0,1,0,0,0],[1,0,0,1,0,0,0]],bounds:[.2,.6,1,.8]},tree:{functions:[[.4,0,0,.4,0,0,5],[.42,-.42,.42,.42,0,2,4],[.42,.42,-.42,.42,0,2,4],[0,0,0,.5,0,0,3]],bounds:[-2.4,0,6.9,4.5]},bee:{functions:[[.6178,0,0,-.6178,0,10,15],[0,-.786,.786,0,.786,0,15],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],bounds:[-2.182,-1e-4,6.642,9.9983]}};function i(){return Object.keys(a)}function c(t){const n=a[t];if(!n)throw Error(`There is no preset with the name "${t}"!`);return n}function h(t){if(!t)return!1;try{return r(t,{functions:["array(4)",["array(7)","number"]],bounds:["array(4)","number"]}),!0}catch(t){return console.error("LocalStorage is corrupted!"),console.error(t),!1}}function u(){const{params:t}=(0,s.O)();return o.useMemo((()=>{let n=function(){var t;const n=function(t){try{return JSON.parse(t)}catch(t){return null}}(null!==(t=window.localStorage.getItem("Barnsley"))&&void 0!==t?t:"");return h(n)?n:c(i()[0])}();try{const e=JSON.parse(decodeURIComponent(t));h(e)&&(n=e)}catch(t){console.error(t)}finally{return window.localStorage.setItem("Barnsley",JSON.stringify(n)),console.log("ðŸš€ [data] barnsleyParams = ",n),n}}),[t])}},28:(t,n,e)=>{e.a(t,(async(t,r)=>{try{e.d(n,{B:()=>h});var o=e(235),s=t([o]);o=(s.then?(await s)():s)[0];class a{constructor(){this._canvas=null,this._params=null,this.ctx=null,this.bitmap={width:0,height:0,colorSpace:"srgb",data:new Uint8ClampedArray},this.loops=0,this.reset=()=>{this.loops=-1},this.stop=()=>{this.loops=0},this.paint=t=>{window.requestAnimationFrame(this.paint);const{ctx:n,params:e}=this;if(!n||!e)return;if(0===this.loops)return;const{width:r,height:o}=c(n);this.loops<0&&(n.fillStyle="#000",n.fillRect(0,0,r,o),this.loops=Math.ceil(r*o*1e-4),this.bitmap=n.getImageData(0,0,r,o)),this.bitmap.width===r&&this.bitmap.height===o?(i(this.bitmap.data,r,o,t,e),n.putImageData(this.bitmap,0,0),this.loops--):this.reset()},window.requestAnimationFrame(this.paint),this.observer=new ResizeObserver(this.reset)}set canvas(t){this.ctx=null,this._canvas&&this.observer.unobserve(this._canvas),this._canvas=t,t?(this.observer.observe(t),this.ctx=t.getContext("2d",{alpha:!1}),this.reset()):this.stop()}get params(){return this._params}set params(t){this._params=t,this.reset()}}function i(t,n,e,r,{functions:[s,a,i,c],bounds:[h,u,l,f]}){const[d,p,y,b,g,v,w]=s,[m,_,$,x,k,E,j]=a,[A,I,M,S,O,P,N]=i,[W,q,B,F,C,T,Z]=c,G=(h+l)/2,J=(u+f)/2,R=Math.abs((l-h)/(f-u)),U=n/e,D=U>R?U/R:1,H=U>R?1:R/U;(0,o.hh)(t,n,e,r,d,p,y,b,g,v,Math.ceil(w),m,_,$,x,k,E,Math.ceil(j),A,I,M,S,O,P,Math.ceil(N),W,q,B,F,C,T,Math.ceil(Z),G+D*(h-G),J+H*(u-J),G+D*(l-G),J+H*(f-J))}function c(t){const{canvas:n}=t,e=Math.ceil(n.clientWidth),r=Math.ceil(n.clientHeight);return n.width=e,n.height=r,{width:e,height:r}}const h=new a;r()}catch(u){r(u)}}))},273:(t,n,e)=>{function r(t){return()=>function(t){window.location.hash=t}(t)}e.d(n,{H:()=>r})},235:(t,n,e)=>{e.a(t,(async(t,r)=>{try{e.d(n,{hh:()=>s.hh});var o=e(530),s=e(838),a=t([o]);o=(a.then?(await a)():a)[0],(0,s.oT)(o),r()}catch(t){r(t)}}))},838:(t,n,e)=>{let r;function o(t){r=t}e.d(n,{T2:()=>f,hh:()=>l,oT:()=>o,ug:()=>d});let s=null;function a(){return null!==s&&0!==s.byteLength||(s=new Uint8Array(r.memory.buffer)),s}const i=new Array(128).fill(void 0);function c(t){return i[t]}i.push(void 0,null,!0,!1);let h=i.length;let u=0;function l(t,n,e,o,s,c,l,f,d,p,y,b,g,v,w,m,_,$,x,k,E,j,A,I,M,S,O,P,N,W,q,B,F,C,T,Z){var G=function(t,n){const e=n(1*t.length)>>>0;return a().set(t,e/1),u=t.length,e}(t,r.__wbindgen_malloc),J=u;r.barnsley_fern_paint(G,J,function(t){h===i.length&&i.push(i.length+1);const n=h;return h=i[n],i[n]=t,n}(t),n,e,o,s,c,l,f,d,p,y,b,g,v,w,m,_,$,x,k,E,j,A,I,M,S,O,P,N,W,q,B,F,C,T,Z)}function f(t,n,e){var r,o;new Uint8Array(c(e).buffer,c(e).byteOffset,c(e).byteLength).set((r=t,o=n,r>>>=0,a().subarray(r/1,r/1+o)))}function d(t){!function(t){const n=c(t);(function(t){t<132||(i[t]=h,h=t)})(t)}(t)}},530:(t,n,e)=>{var r=e(838);t.exports=e.v(n,t.id,"d5abaf34c3cd05dbdd0a",{"./index_bg.js":{__wbindgen_copy_to_typed_array:r.T2,__wbindgen_object_drop_ref:r.ug}})}}]);