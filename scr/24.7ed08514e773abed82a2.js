"use strict";(self.webpackChunkfern=self.webpackChunkfern||[]).push([[24],{724:(n,t,e)=>{function r(n,t){try{return s(n,t),!0}catch(n){return!1}}function s(n,t,e="data"){if("unknown"===t)return;if("null"===t){if(null!==n)throw Error(`Expected ${e} to be null and not a ${typeof n}!`);return}if("string"==typeof t){if(typeof n!==t)throw Error(`Expected ${e} to be a string and not a ${typeof n}!`);return}if(Array.isArray(t)){const[r]=t;switch(r){case"array":return void function(n,t,e){if(!Array.isArray(n))throw Error(`Expected ${t} to be an array and not a ${typeof n}!`);const[,r]=e;for(let e=0;e<n.length;e+=1)s(n[e],r,`${t}[${e}]`)}(n,e,t);case"map":return void function(n,t,e){if(!function(n){return!!n&&!Array.isArray(n)&&"object"==typeof n}(n))throw Error(`Expected ${t} to be an object and not a ${typeof n}!`);const[,r]=e;for(const e of Object.keys(n))"string"==typeof e&&s(n[e],r,`${t}[${e}]`)}(n,e,t);case"?":return void function(n,t,e){if(void 0===n)return;const[,r]=e;s(n,r,t)}(n,e,t);case"|":return void function(n,t,e){const[,...r]=e;let o=Error(`No type has been defined for this alternative: ${JSON.stringify(e)}!`);for(const e of r)try{return void s(n,e,t)}catch(n){n instanceof Error&&(o=n)}throw o}(n,e,t);case"literal":return void function(n,t,e){const[,...r]=e;for(const t of r)if(n===t)return;throw Error(`Expected ${t} to be a literal (${r.map((n=>`"${n}"`)).join(" | ")})!`)}(n,e,t);default:if(r.startsWith("array("))return void function(n,t,e,r){if(!Array.isArray(n))throw Error(`Expected ${t} to be an array and not a ${typeof n}!`);if(n.length!==r)throw Error(`${t} was expected to have a length of ${r}, but we got ${n.length}!`);const[,o]=e;for(let e=0;e<n.length;e+=1)s(n[e],o,`${t}[${e}]`)}(n,e,t,parseInt(r.substring(6,r.length-1),10));throw Error(`Don't know how to create a type guard for this kind of type: ${JSON.stringify(t)}`)}}if("object"!=typeof n)throw Error(`Expected ${e} to be an object and not a ${typeof n}!`);const r=n;for(const n of Object.keys(t))"string"==typeof n&&t[n]&&s(r[n],t[n],`${e}.${n}`)}e.d(t,{P9:()=>r,p_:()=>s})},778:(n,t,e)=>{e.d(t,{Z:()=>i});var r=e(81),s=e.n(r),o=e(645),a=e.n(o)()(s());a.push([n.id,".mYSOP277932fPsNxlbDd {\n    font-family: cursive;\n}\n\nsmall {\n    opacity: 0.5;\n}\n",""]),a.locals={formula:"mYSOP277932fPsNxlbDd"};const i=a},187:(n,t,e)=>{e.d(t,{Z:()=>i});var r=e(81),s=e.n(r),o=e(645),a=e.n(o)()(s());a.push([n.id,'.dNCUO44sVfX5S1kC33sC {\n    font: inherit;\n    border: none;\n    background-color: var(--theme-color-input);\n    color: var(--theme-color-on-input);\n    display: grid;\n    place-items: center;\n    padding: 0 0.5em;\n    width: 100%;\n}\n\ninput.dNCUO44sVfX5S1kC33sC::-webkit-outer-spin-button,\ninput.dNCUO44sVfX5S1kC33sC::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n}\n\n/* Firefox */\ninput.dNCUO44sVfX5S1kC33sC[type="number"] {\n    appearance: textfield;\n}\n\n.Z9HVzWhzLwR46SEgCaSZ {\n    background: var(--theme-color-error);\n    color: var(--theme-color-on-error);\n}\n',""]),a.locals={Input:"dNCUO44sVfX5S1kC33sC",error:"Z9HVzWhzLwR46SEgCaSZ"};const i=a},361:(n,t,e)=>{e.d(t,{Z:()=>b});var r=e(379),s=e.n(r),o=e(795),a=e.n(o),i=e(569),c=e.n(i),u=e(565),l=e.n(u),d=e(216),f=e.n(d),h=e(589),p=e.n(h),y=e(778),g={};g.styleTagTransform=p(),g.setAttributes=l(),g.insert=c().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=f(),s()(y.Z,g);const b=y.Z&&y.Z.locals?y.Z.locals:void 0},24:(n,t,e)=>{e.a(n,(async(n,r)=>{try{e.r(t),e.d(t,{default:()=>p});var s=e(893),o=e(686),a=e(541),i=e(273),c=e(268),u=e(743),l=e(361),d=e(423),f=e(666),h=n([f]);function p(){const[n,t]=(0,d.q)();return(0,s.jsxs)(o.Rf,{position:"absolute",color:"neutral-1",display:"flex",overflow:"auto",justifyContent:"space-around",alignItems:"flex-start",flexWrap:"wrap",gap:"M",padding:"M",width:"100%",height:"100%",children:[(0,s.jsx)(y,{params:n}),(0,s.jsxs)(g,{children:[(0,s.jsx)("h2",{children:"Functions"}),(0,s.jsx)(o.Rf,{display:"grid",gridTemplateColumns:"auto repeat(4, 1fr) auto",placeItems:"stretch",gap:"XS",width:"100%",children:b(-1,6).map((e=>b(-1,4).map((r=>{const a=`${e}/${r}`;return e<0?r<0?(0,s.jsx)("div",{},a):r>3?(0,s.jsx)("div",{}):(0,s.jsx)(o.Rf,{display:"grid",placeItems:"center",children:(0,s.jsxs)("div",{children:["f",(0,s.jsx)("sub",{children:r+1})]})},a):r<0?(0,s.jsx)(o.Rf,{children:"abcdef%".charAt(e)},a):r>3?(0,s.jsx)("small",{children:["x","y","x","y",(0,s.jsxs)("span",{children:["t",(0,s.jsx)("sub",{children:"x"})]}),(0,s.jsxs)("span",{children:["t",(0,s.jsx)("sub",{children:"y"})]})][e]}):(0,s.jsx)(c.I,{value:n.functions[r][e],onChange:s=>((e,r,s)=>{const o=structuredClone(n);o.functions[e][r]=s,t(o)})(r,e,s)},a)}))))}),(0,s.jsxs)(o.Rf,{className:l.Z.formula,display:"flex",justifyContent:"space-between",margin:["M",0],children:[(0,s.jsx)("div",{className:l.Z.formula,children:"f(x) = ax + by + e"}),(0,s.jsx)("div",{className:l.Z.formula,children:"f(y) = cx + dy + f"})]}),(0,s.jsx)("hr",{}),(0,s.jsx)(u.Y,{onFunctionChange:(e,r,s,o,a,i,c)=>{const u=[...n.functions];u[e]=[r,s,o,a,i,c,u[e][6]],t(Object.assign(Object.assign({},n),{functions:u}))}})]}),(0,s.jsx)(y,{params:n}),(0,s.jsxs)(g,{children:[(0,s.jsx)("h2",{children:"Bounds"}),(0,s.jsx)(f.F,{})]}),(0,s.jsx)(y,{params:n}),(0,s.jsxs)(g,{children:[(0,s.jsx)("h2",{children:"Presets"}),(0,s.jsx)(o.Rf,{display:"flex",flexWrap:"wrap",alignItems:"center",children:(0,a.go)().map((n=>(0,s.jsx)(o.NA,{margin:0,variant:"text",onClick:()=>(n=>{const e=(0,a.lB)(n);t(e)})(n),children:n})))})," "]}),(0,s.jsx)(y,{params:n})]})}function y({params:n}){return(0,s.jsx)(o.Rf,{display:"flex",justifyContent:"space-around",children:(0,s.jsx)(o.NI,{icon:o.fn,onClick:()=>(0,i.E)(`/barnsley/view/${encodeURIComponent(JSON.stringify(n))}`)})})}function g({children:n}){return(0,s.jsx)(o.Rf,{color:"neutral-5",borderRadius:"S",padding:"S",width:"480px",maxWidth:"99vw",children:n})}function b(n,t){const e=Math.min(n,t),r=Math.max(n,t),s=[e];let o=e+1;for(;o<=r;)s.push(o),o++;return s}f=(h.then?(await h)():h)[0],r()}catch(x){r(x)}}))},743:(n,t,e)=>{e.d(t,{Y:()=>i});var r=e(893),s=e(294),o=e(686),a=e(268);function i({onFunctionChange:n}){const[t,e]=s.useState(0),[i,c]=s.useState(0),[u,l]=s.useState(1),[d,f]=s.useState(1),[h,p]=s.useState(0);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.Rf,{display:"grid",gridTemplateColumns:"auto 1fr 1fr",gap:"S",children:[(0,r.jsx)("div",{children:"Translate:"}),(0,r.jsx)(a.I,{value:t,onChange:e}),(0,r.jsx)(a.I,{value:i,onChange:c}),(0,r.jsx)("div",{children:"Scale:"}),(0,r.jsx)(a.I,{value:u,onChange:l}),(0,r.jsx)(a.I,{value:d,onChange:f}),(0,r.jsx)("div",{children:"Rotate:"}),(0,r.jsx)(a.I,{value:h,onChange:p}),(0,r.jsx)("div",{children:"(degrees)"})]}),(0,r.jsx)(o.Rf,{display:"flex",justifyContent:"space-around",children:[0,1,2,3].map((e=>(0,r.jsx)(o.NA,{onClick:()=>(e=>{const r=h*Math.PI/180,s=Math.cos(r),o=Math.sin(r);n(e,s*u,-o,o,s*d,t,i)})(e),children:(0,r.jsxs)("span",{children:["f",(0,r.jsx)("sub",{children:e+1})]})},e)))})]})}},80:(n,t,e)=>{e.a(n,(async(n,r)=>{try{e.d(t,{F:()=>l});var s=e(893),o=e(686),a=e(235),i=e(423),c=e(268),u=n([a]);function l(){const[n,t]=i.Z.barnsley.bounds.useState(),e=i.Z.barnsley.functions.useValue(),r=(e,r)=>{const s=[...n];s[e]=r,t(s)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.Rf,{display:"grid",gridTemplateColumns:"auto 1fr 1fr",gap:"S",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{children:"min"}),(0,s.jsx)("div",{children:"max"}),(0,s.jsx)("div",{children:"X"}),(0,s.jsx)(c.I,{value:n[0],onChange:n=>r(0,n)}),(0,s.jsx)(c.I,{value:n[2],onChange:n=>r(2,n)}),(0,s.jsx)("div",{children:"Y"}),(0,s.jsx)(c.I,{value:n[1],onChange:n=>r(1,n)}),(0,s.jsx)(c.I,{value:n[3],onChange:n=>r(3,n)})]}),(0,s.jsx)(o.NA,{onClick:()=>{const n=new Float32Array([0,0,0,0]),[[r,s,o,i,c,u,l],[d,f,h,p,y,g,b],[x,m,v,j,w,S,C],[$,I,E,A,N,k,O]]=e;(0,a.wq)(n,Date.now(),r,s,o,i,c,u,l,d,f,h,p,y,g,b,x,m,v,j,w,S,C,$,I,E,A,N,k,O),console.log("üöÄ [BarnsleyBoundsEditor] data = ",n);const _=Array.from(n);t(_)},children:"Compute bounds"})]})}a=(u.then?(await u)():u)[0],r()}catch(d){r(d)}}))},666:(n,t,e)=>{e.a(n,(async(n,r)=>{try{e.d(t,{F:()=>s.F});var s=e(80),o=n([s]);s=(o.then?(await o)():o)[0],r()}catch(n){r(n)}}))},268:(n,t,e)=>{e.d(t,{I:()=>j});var r=e(893),s=e(294),o=e(379),a=e.n(o),i=e(795),c=e.n(i),u=e(569),l=e.n(u),d=e(565),f=e.n(d),h=e(216),p=e.n(h),y=e(589),g=e.n(y),b=e(187),x={};x.styleTagTransform=g(),x.setAttributes=f(),x.insert=l().bind(null,"head"),x.domAPI=c(),x.insertStyleElement=p(),a()(b.Z,x);const m=b.Z&&b.Z.locals?b.Z.locals:void 0,v=/^\-?(([0-9]+(\.[0-9]+)?|\.[0-9]+))$/;function j({value:n,onChange:t}){const[e,o]=s.useState(!1),[a,i]=s.useState(`${n}`);return s.useEffect((()=>{o(!1),i(`${n}`)}),[n]),(0,r.jsx)("input",{className:w(m.Input,e&&m.error),type:"text",value:a,onChange:n=>{const{value:e}=n.target;i(e),console.log("üöÄ [Input] value = ",e),v.lastIndex=-1,v.test(e)?(o(!1),t(Number(e))):(console.warn("ERROR"),o(!0))}})}function w(...n){return n.filter((n=>"string"==typeof n)).join(" ")}},541:(n,t,e)=>{e.d(t,{Bt:()=>l,LW:()=>d,go:()=>c,lB:()=>u});var r=e(724),s=e(294),o=e(78),a=e(423);const i={Barnsley:{functions:[[0,0,0,.16,0,0,1],[.85,.04,-.04,.85,0,1.6,85],[.2,-.26,.23,.22,0,1.6,7],[-.15,.28,.26,.24,0,.44,7]],bounds:[-2.182,-1e-4,6.642,9.9983]},Cyclosorus:{functions:[[0,0,0,.25,0,-.4,2],[.95,.005,-.005,.93,-.002,.5,84],[.035,-.2,.16,.04,-.09,.02,7],[-.04,.2,.16,.04,.083,.12,7]],bounds:[0,0,2,7]},Culcita:{functions:[[0,0,0,.25,0,-.14,2],[.85,.02,-.02,.83,0,1,84],[.09,-.28,.3,.11,0,.6,7],[-.09,.28,.3,.09,0,.7,7]],bounds:[-4,0,2,6]},Fishbone:{functions:[[0,0,0,.25,0,-.4,2],[.95,.002,-.002,.93,-.002,.5,84],[.035,-.11,.27,.01,-.05,.005,7],[-.04,.11,.27,.01,.047,.06,7]],bounds:[-5,-1,2,8]},Sierpi≈Ñski:{functions:[[.5,0,0,.5,-.666,0,10],[.5,0,0,.5,.666,0,10],[.5,0,0,.5,0,1,10],[0,0,0,0,0,0,0]],bounds:[-2,0,2,2]},Coch:{functions:[[.5,.375,.5,-.375,-.0625,.5625,10],[.5,-.375,-.5,-.375,.5625,1.0625,10],[1,0,0,1,0,0,0],[1,0,0,1,0,0,0]],bounds:[.2,.6,1,.8]},Tree:{functions:[[.4,0,0,.4,0,0,5],[.42,-.42,.42,.42,0,2,4],[.42,.42,-.42,.42,0,2,4],[0,0,0,.5,0,0,3]],bounds:[-2.4,0,6.9,4.5]},Hive:{functions:[[.6178,0,0,-.6178,0,10,15],[0,-.786,.786,0,.786,0,15],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],bounds:[-2.182,-1e-4,6.642,9.9983]}};function c(){return Object.keys(i)}function u(n){const t=i[n];if(!t)throw Error(`There is no preset with the name "${n}"!`);return t}function l(){return u(c()[0])}function d(){const{params:n}=(0,o.O)();return s.useMemo((()=>{let t={bounds:a.Z.barnsley.bounds.value,functions:a.Z.barnsley.functions.value};try{const e=JSON.parse(decodeURIComponent(n));(function(n){if(!n)return!1;try{return(0,r.p_)(n,{functions:["array(4)",["array(7)","number"]],bounds:["array(4)","number"]}),!0}catch(n){return console.error("LocalStorage is corrupted!"),console.error(n),!1}})(e)&&(t=e)}catch(n){console.error(n)}finally{return t}}),[n])}},423:(n,t,e)=>{e.d(t,{Z:()=>u,q:()=>l});var r=e(294);class s{constructor(n,t={}){var e;this.options=t,this.listeners=new Set,this.sessionId=`AtomicState:${(s.counter++).toString(16)}\r`,this.currentValue=t.transform?t.transform(n):n,this.id=`AtomicState\n${null===(e=t.storage)||void 0===e?void 0:e.id}`,t.storage?this.loadFromStorage():this.restoreSession()}get value(){return this.currentValue}set value(n){const{transform:t,storage:e}=this.options;if(t&&(n=t(n)),n!==this.currentValue){this.currentValue=n,e?window.localStorage.setItem(this.id,JSON.stringify(n)):this.saveSession(n);for(const t of this.listeners)t(n)}}useValue(){const[n,t]=r.useState(this.currentValue);return r.useEffect((()=>(this.listeners.add(t),()=>{this.listeners.delete(t)})),[]),n}useState(){const[n,t]=r.useState(this.currentValue);return r.useEffect((()=>(this.listeners.add(t),()=>{this.listeners.delete(t)})),[]),[n,n=>{this.value=n}]}loadFromStorage(){const{storage:n}=this.options;if(n)try{const t=window.localStorage.getItem(this.id);if(!t)return;const e=JSON.parse(t);if(!n.guard(e))throw Error("Invalid type!");this.currentValue=e}catch(t){console.error(`Unable to retrieve AtomicState "${n.id}":`,t)}}saveSession(n){const t=JSON.stringify(n),e=a(t);window.sessionStorage.setItem(this.sessionId,`${e}${t}`)}restoreSession(){const n=window.sessionStorage.getItem(this.sessionId);if(!n)return;const t=n.substring(0,16),e=n.substring(16);if(a(e)===t)try{const n=JSON.parse(e);this.value=n}catch(n){console.error("Atomic state is an invalid JSON!",this.sessionId)}else console.error("Atomic state has been corrupted!",this.sessionId)}}s.counter=0;const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";function a(n){const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let e=0;e<n.length;e++){const r=n.charCodeAt(e);t[e%t.length]+=r}return t.map((n=>o[n%o.length])).join("")}var i=e(724),c=e(541);const u={barnsley:{bounds:new s((0,c.Bt)().bounds,{storage:{id:"barnsley/bounds",guard:d(["array(4)","number"])}}),functions:new s((0,c.Bt)().functions,{storage:{id:"barnsley/functions",guard:d(["array(4)",["array(7)","number"]])}})}};function l(){const[n,t]=u.barnsley.bounds.useState(),[e,r]=u.barnsley.functions.useState();return[{bounds:n,functions:e},n=>{t(n.bounds),r(n.functions)}]}function d(n){return t=>(0,i.P9)(t,n)}},273:(n,t,e)=>{function r(n){window.location.hash=n}function s(n){return()=>r(n)}e.d(t,{E:()=>r,H:()=>s})},235:(n,t,e)=>{e.a(n,(async(n,r)=>{try{e.d(t,{hh:()=>o.hh,wq:()=>o.wq});var s=e(530),o=e(838),a=n([s]);s=(a.then?(await a)():a)[0],(0,o.oT)(s),r()}catch(n){r(n)}}))},838:(n,t,e)=>{let r;function s(n){r=n}e.d(t,{T2:()=>y,hh:()=>f,oT:()=>s,ug:()=>g,wq:()=>p});let o=null;function a(){return null!==o&&0!==o.byteLength||(o=new Uint8Array(r.memory.buffer)),o}const i=new Array(128).fill(void 0);function c(n){return i[n]}i.push(void 0,null,!0,!1);let u=i.length;let l=0;function d(n){u===i.length&&i.push(i.length+1);const t=u;return u=i[t],i[t]=n,t}function f(n,t,e,s,o,i,c,u,f,h,p,y,g,b,x,m,v,j,w,S,C,$,I,E,A,N,k,O,_,Z,R,V,F,T,P,U){var B=function(n,t){const e=t(1*n.length)>>>0;return a().set(n,e/1),l=n.length,e}(n,r.__wbindgen_malloc),J=l;r.barnsley_fern_paint(B,J,d(n),t,e,s,o,i,c,u,f,h,p,y,g,b,x,m,v,j,w,S,C,$,I,E,A,N,k,O,_,Z,R,V,F,T,P,U)}let h=null;function p(n,t,e,s,o,a,i,c,u,f,p,y,g,b,x,m,v,j,w,S,C,$,I,E,A,N,k,O,_,Z){var R=function(n,t){const e=t(4*n.length)>>>0;return(null!==h&&0!==h.byteLength||(h=new Float32Array(r.memory.buffer)),h).set(n,e/4),l=n.length,e}(n,r.__wbindgen_malloc),V=l;r.barnsley_fern_compute_bounds(R,V,d(n),t,e,s,o,a,i,c,u,f,p,y,g,b,x,m,v,j,w,S,C,$,I,E,A,N,k,O,_,Z)}function y(n,t,e){var r,s;new Uint8Array(c(e).buffer,c(e).byteOffset,c(e).byteLength).set((r=n,s=t,r>>>=0,a().subarray(r/1,r/1+s)))}function g(n){!function(n){const t=c(n);(function(n){n<132||(i[n]=u,u=n)})(n)}(n)}},530:(n,t,e)=>{var r=e(838);n.exports=e.v(t,n.id,"dc781ef30b979d40a2cf",{"./index_bg.js":{__wbindgen_copy_to_typed_array:r.T2,__wbindgen_object_drop_ref:r.ug}})}}]);